<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .screen {
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s ease-in-out;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .screen.active {
            opacity: 1;
            transform: translateX(0);
        }

        .screen.prev {
            transform: translateX(-100%);
        }

        /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        .start-screen {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            text-align: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .cta-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            font-weight: bold;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        /* ç›®çš„é¸æŠç”»é¢ */
        .purpose-screen {
            background: white;
            padding: 40px 20px;
        }

        .purpose-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 30px;
            color: #4a90e2;
            font-weight: bold;
        }

        .purpose-cards {
            display: grid;
            gap: 15px;
        }

        .purpose-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .purpose-card:hover {
            border-color: #4a90e2;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(74, 144, 226, 0.2);
        }

        .purpose-card.selected {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            border-color: #4a90e2;
        }

        .purpose-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .purpose-text {
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆç”»é¢ */
        .profile-screen {
            background: white;
            padding: 30px 20px;
            justify-content: flex-start;
            padding-top: 60px;
        }

        .profile-title {
            font-size: 1.3rem;
            text-align: center;
            margin-bottom: 30px;
            color: #4a90e2;
            font-weight: bold;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 25px;
            width: 100%;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
            font-size: 1rem;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .form-select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .tag {
            background: #f0f0f0;
            border: 2px solid #e0e0e0;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .tag.selected {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .analyze-button {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
            opacity: 0.5;
            pointer-events: none;
        }

        .analyze-button.active {
            opacity: 1;
            pointer-events: auto;
        }

        .analyze-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.3);
        }

        /* AIåˆ†æç”»é¢ */
        .analysis-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .analysis-animation {
            width: 200px;
            height: 200px;
            margin: 40px auto;
            position: relative;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ff6b6b;
            border-radius: 50%;
            animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            50% { 
                transform: translateY(-20px) scale(1.2);
                opacity: 0.7;
            }
        }

        .radar-chart {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            position: relative;
            opacity: 0;
            transform: scale(0);
            transition: all 1s ease;
        }

        .radar-chart.show {
            opacity: 1;
            transform: scale(1);
        }

        .analysis-text {
            font-size: 1.2rem;
            margin: 20px 0;
            min-height: 30px;
        }

        /* ãƒ¡ã‚¤ãƒ³ç”»é¢ */
        .main-screen {
            background: white;
            padding: 20px;
            justify-content: flex-start;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .ai-score {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .card-stack {
            position: relative;
            width: 100%;
            height: 500px;
            margin: 20px 0;
        }

        .profile-card {
            position: absolute;
            width: 100%;
            height: 450px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .profile-card:nth-child(1) {
            z-index: 3;
        }

        .profile-card:nth-child(2) {
            z-index: 2;
            transform: scale(0.95) translateY(10px);
        }

        .profile-card:nth-child(3) {
            z-index: 1;
            transform: scale(0.9) translateY(20px);
        }

        .card-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            position: relative;
        }

        .card-content {
            padding: 20px;
        }

        .card-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .card-age {
            color: #666;
            margin-bottom: 10px;
        }

        .card-compatibility {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .card-tag {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #666;
        }



        /* ãƒãƒƒãƒãƒ³ã‚°æˆç«‹ç”»é¢ */
        .match-screen {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .celebration {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out infinite alternate;
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .match-profiles {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
        }

        .match-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            color: #ff6b6b;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
        }

        .match-text {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 30px;
        }

        .match-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .match-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .match-btn.primary {
            background: white;
            color: #ff6b6b;
        }

        .match-btn.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .match-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ãƒãƒ£ãƒƒãƒˆç”»é¢ */
        .chat-screen {
            background: white;
            padding: 0;
            justify-content: flex-start;
        }

        .chat-header {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 400px;
        }

        .message {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }

        .message.received {
            justify-content: flex-start;
        }

        .message.sent {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .message.received .message-bubble {
            background: #f0f0f0;
            color: #333;
        }

        .message.sent .message-bubble {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
        }

        .ai-suggestions {
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 0;
        }

        .ai-suggestions.show {
            display: block;
        }

        .ai-suggestions.hide {
            display: none;
        }

        .ai-suggestion {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .ai-suggestion:hover {
            background: #f0f8ff;
            border-color: #4a90e2;
        }

        .ai-suggestion:last-child {
            margin-bottom: 0;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #e0e0e0;
            background: white;
        }

        .message-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            font-size: 1rem;
            margin-right: 10px;
        }

        .ai-assist-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .ai-assist-btn:hover {
            transform: scale(1.05);
        }

        .send-btn {
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .purpose-card {
                padding: 15px;
            }
            
            .form-input, .form-select {
                padding: 12px;
            }
        }

        /* ãƒãƒ¼ãƒˆé£›ã³å‡ºã—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .heart-animation {
            position: fixed;
            z-index: 1000;
            pointer-events: none;
            font-size: 2rem;
            color: #ff6b6b;
            animation: heartFly 2s ease-out forwards;
        }

        @keyframes heartFly {
            0% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
            100% {
                transform: scale(2) translateY(-100px);
                opacity: 0;
            }
        }

        /* ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .typing-animation {
            border-right: 2px solid #4a90e2;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { border-color: #4a90e2; }
            51%, 100% { border-color: transparent; }
        }

        /* ç²’å­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear infinite;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        .swipe-hint {
    text-align: center;
    margin-top: 20px;
    padding: 15px;
    background: rgba(74, 144, 226, 0.1);
    border-radius: 10px;
    font-size: 0.9rem;
    color: #4a90e2;
}

.swipe-hint-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 10px;
    font-size: 1.2rem;
}

.swipe-left {
    color: #ff6b6b;
}

.swipe-right {
    color: #4a90e2;
}

    </style>
</head>
<body>
    <div class="container">
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div class="screen start-screen active" id="start-screen">
            <div class="logo">â¤ï¸ğŸ¤Matching AI</div>
            <div class="subtitle">Matching AIã‚’ã€<br>ä»Šã™ãä½“é¨“ã™ã‚‹ã€‚</div>
            <button class="cta-button" onclick="goToScreen('purpose-screen')">ãƒ‡ãƒ¢ã‚’ä½“é¨“ã™ã‚‹</button>
        </div>

        <!-- ç›®çš„é¸æŠç”»é¢ -->
        <div class="screen purpose-screen" id="purpose-screen">
            <div class="purpose-title">ã©ã®ã‚ˆã†ãªäººã‚’æ¢ã—ã¾ã™ã‹ï¼Ÿ</div>
            <div class="purpose-cards">
                <div class="purpose-card" onclick="selectPurpose(this, 'romance')">
                    <div class="purpose-icon">ğŸ’•</div>
                    <div class="purpose-text">æ‹æ„›ãƒ»ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ¢ã—</div>
                </div>
                <div class="purpose-card" onclick="selectPurpose(this, 'friend')">
                    <div class="purpose-icon">ğŸ¤</div>
                    <div class="purpose-text">æ°—è»½ãªå‹é”ã‚’æ¢ã™</div>
                </div>
                <div class="purpose-card" onclick="selectPurpose(this, 'hobby')">
                    <div class="purpose-icon">ğŸ¨</div>
                    <div class="purpose-text">è¶£å‘³ã®ä»²é–“ã‚’æ¢ã™</div>
                </div>
                
                <div class="purpose-card" onclick="selectPurpose(this, 'study')">
                    <div class="purpose-icon">ğŸ“š</div>
                    <div class="purpose-text">å­¦ã³åˆã„ãƒ»èªå­¦äº¤æ›</div>
                </div>
                

            </div>
        </div>

        <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆç”»é¢ -->
        <div class="screen profile-screen" id="profile-screen">
            <div class="profile-title">AIãŒã‚ãªãŸã®ã“ã¨ã‚’çŸ¥ã‚‹ãŸã‚ã«ã€<br>ã„ãã¤ã‹è³ªå•ã•ã›ã¦ãã ã•ã„ã€‚</div>
            
            <div class="form-group">
                <label class="form-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </label>
                <input type="text" class="form-input" id="nickname" placeholder="ä¾‹: ãŸã‚ã†">
            </div>
            
            <div class="form-group">
                <label class="form-label">å¹´ä»£</label>
                <select class="form-select" id="age">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="10ä»£">10ä»£</option>
                    <option value="20ä»£">20ä»£</option>
                    <option value="30ä»£">30ä»£</option>
                    <option value="40ä»£">40ä»£</option>
                    <option value="50ä»£">50ä»£</option>
                    <option value="60ä»£">60ä»£</option>
                    <option value="70ä»£ä»¥ä¸Š">70ä»£ä»¥ä¸Š</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">èˆˆå‘³ãƒ»é–¢å¿ƒã®ã‚ã‚‹ã“ã¨</label>
                <div class="tags-container">
                    <div class="tag" onclick="toggleTag(this)">#æ•£æ­©</div>
                    <div class="tag" onclick="toggleTag(this)">#ã‚«ãƒ•ã‚§å·¡ã‚Š</div>
                    <div class="tag" onclick="toggleTag(this)">#æ˜ ç”»é‘‘è³</div>
                    <div class="tag" onclick="toggleTag(this)">#ã‚²ãƒ¼ãƒ </div>
                    <div class="tag" onclick="toggleTag(this)">#ã‚¢ãƒ‹ãƒ¡</div>
                    <div class="tag" onclick="toggleTag(this)">#å‹•ç‰©</div>
                    <div class="tag" onclick="toggleTag(this)">#æ—…è¡Œ</div>
                    <div class="tag" onclick="toggleTag(this)">#éŸ³æ¥½</div>
                    <div class="tag" onclick="toggleTag(this)">#èª­æ›¸</div>
                    <div class="tag" onclick="toggleTag(this)">#å¤–å›½èª</div>
                </div>
            </div>
            
            <button class="analyze-button" id="analyze-btn" onclick="startAnalysis()">AIã«åˆ†æã—ã¦ã‚‚ã‚‰ã†</button>
        </div>

        <!-- AIåˆ†æç”»é¢ -->
        <div class="screen analysis-screen" id="analysis-screen">
            <div class="analysis-text" id="analysis-text">ã‚ãªãŸã«åˆã„ãã†ãªäººã‚’æ¢ã—ã¦ã„ã¾ã™...</div>
            <div class="analysis-animation" id="analysis-animation"></div>
            <div class="radar-chart" id="radar-chart">
                <svg width="150" height="150" viewBox="0 0 150 150">
                    <polygon points="75,15 120,45 120,105 75,135 30,105 30,45" 
                             fill="none" stroke="#fff" stroke-width="2" opacity="0.3"/>
                    <polygon points="75,25 110,50 110,100 75,125 40,100 40,50" 
                             fill="none" stroke="#fff" stroke-width="2" opacity="0.5"/>
                    <polygon points="75,35 100,55 100,95 75,115 50,95 50,55" 
                             fill="none" stroke="#fff" stroke-width="2" opacity="0.7"/>
                    <polygon points="75,30 108,52 105,98 75,118 45,98 48,52" 
                             fill="rgba(255,255,255,0.2)" stroke="#fff" stroke-width="2"/>
                    <text x="75" y="10" text-anchor="middle" fill="#fff" font-size="10">å”èª¿æ€§</text>
                    <text x="130" y="50" text-anchor="middle" fill="#fff" font-size="10">å¥½å¥‡å¿ƒ</text>
                    <text x="130" y="110" text-anchor="middle" fill="#fff" font-size="10">å„ªã—ã•</text>
                    <text x="75" y="145" text-anchor="middle" fill="#fff" font-size="10">ç©æ¥µæ€§</text>
                    <text x="20" y="110" text-anchor="middle" fill="#fff" font-size="10">çŸ¥è­˜æ¬²</text>
                    <text x="20" y="50" text-anchor="middle" fill="#fff" font-size="10">å…±æ„ŸåŠ›</text>
                </svg>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
        <div class="screen main-screen" id="main-screen">
            <div class="header">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">T</div>
                    <span id="user-name">ãŸã‚ã†</span>
                </div>
                <div class="ai-score">AIä¿¡ç”¨åº¦: 95%</div>
            </div>
            
            <div class="card-stack" id="card-stack">
                <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
            </div>
            <div class="swipe-hint">
    <div>å·¦å³ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦é¸æŠ</div>
    <div class="swipe-hint-icons">
        <span class="swipe-left">â† âœ•</span>
        <span>|</span>
        <span class="swipe-right">â™¥ â†’</span>
    </div>
</div>
            
        </div>

        <!-- ãƒãƒƒãƒãƒ³ã‚°æˆç«‹ç”»é¢ -->
        <div class="screen match-screen" id="match-screen">
            <div class="celebration">ğŸ‰</div>
            <div class="match-text" id="match-text">æµå­ã•ã‚“ã¨ãƒãƒƒãƒã—ã¾ã—ãŸï¼</div>
            <div class="match-profiles">
                <div class="match-avatar" id="user-match-avatar">T</div>
                <div style="font-size: 2rem;">ğŸ’•</div>
                <div class="match-avatar" id="partner-match-avatar">æµ</div>
            </div>
            <div class="match-buttons">
                <button class="match-btn primary" onclick="goToChat(true)">AIã«åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ã†</button>
                <button class="match-btn secondary" onclick="goToChat(false)">è‡ªåˆ†ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹</button>
            </div>
        </div>

        <!-- ãƒãƒ£ãƒƒãƒˆç”»é¢ -->
        <div class="screen chat-screen" id="chat-screen">
            <div class="chat-header" id="chat-header">æµå­ã•ã‚“ã¨ã®ãƒãƒ£ãƒƒãƒˆ</div>
            <div class="chat-messages" id="chat-messages">
                <div class="message received">
                    <div class="message-bubble">ãƒãƒƒãƒãƒ³ã‚°ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</div>
                </div>
            </div>
            
            <div class="ai-suggestions hide" id="ai-suggestions">
                <div class="ai-suggestion" onclick="selectSuggestion(this, 0)">
                    ã“ã¡ã‚‰ã“ãã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ‹è¦‹ã—ã¾ã—ãŸã€‚<span id="suggestion-hobby">ä¿³å¥</span>ãŒãŠå¥½ããªã‚“ã§ã™ã­ã€‚ç§ã‚‚èˆˆå‘³ãŒã‚ã‚‹ã®ã§ã™ãŒã€ä½•ã‹ãŠã™ã™ã‚ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
                </div>
                <div class="ai-suggestion" onclick="selectSuggestion(this, 1)">
                    ãƒãƒƒãƒã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼<span id="suggestion-user-hobby">æ•£æ­©</span>ãŒå¥½ããª<span id="suggestion-user-name">ãŸã‚ã†</span>ã§ã™ã€‚æ°—è»½ã«ãŠè©±ã—ã§ããŸã‚‰å¬‰ã—ã„ã§ã™ã€‚
                </div>
                <div class="ai-suggestion" onclick="selectSuggestion(this, 2)">
                    å¬‰ã—ã„ã§ã™ï¼ã“ã‚Œã‹ã‚‰ã€ãŸãã•ã‚“ãŠè©±ã—ã§ãã‚‹ã®ã‚’æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ã­ã€‚
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" class="message-input" id="message-input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...">
                <button class="ai-assist-btn" onclick="showAISuggestions()">AIã‚¢ã‚·ã‚¹ãƒˆ âœ¨</button>
                <button class="send-btn" onclick="sendMessage()">é€ä¿¡</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentScreen = 'start-screen';
        let selectedPurpose = '';
        let userProfile = {};
        let currentCardIndex = 0;
        let likeCount = 0;
        let matchedPartner = null;
        let isTyping = false;

        // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿
        const profiles = [
            {
                name: "éˆ´æœ¨ æµå­",
                age: 72,
                avatar: "æµ",
                compatibility: 85,
                tags: ["#ä¿³å¥", "#å¾¡æœ±å°é›†ã‚", "#æ•£æ­©", "#ãŠèŒ¶"],
                intro: "å¤«ã¨æ­»åˆ¥ã—ã€æ—¥ä¸­è©±ã™ç›¸æ‰‹ãŒå°‘ãªããªã‚Šã¾ã—ãŸã€‚æ•£æ­©ãŒã¦ã‚‰ã€ä¸€ç·’ã«ãŠèŒ¶ã§ã‚‚ã§ãã‚‹æ–¹ã¨å‡ºä¼šãˆãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚",
                hobbies: ["ä¿³å¥", "å¾¡æœ±å°é›†ã‚"],
                image: "ğŸŒ¸"
            },
            {
                name: "é«˜æ©‹ å¥ä¸€",
                age: 45,
                avatar: "å¥",
                compatibility: 78,
                tags: ["#æ–™ç†", "#å­ä¾›å¥½ã", "#æ˜ ç”»é‘‘è³", "#æ—…è¡Œ"],
                intro: "ä»•äº‹ãŒè½ã¡ç€ãã€ã‚‚ã†ä¸€åº¦ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ç©ã‚„ã‹ãªå®¶åº­ã‚’ç¯‰ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ä¼‘æ—¥ã¯å¨˜ã¨æ–™ç†ã‚’ã™ã‚‹ã®ãŒæ¥½ã—ã¿ã§ã™ã€‚",
                hobbies: ["æ–™ç†", "æ˜ ç”»é‘‘è³"],
                image: "ğŸ‘¨â€ğŸ³"
            },
            {
                name: "Maria",
                age: 25,
                avatar: "M",
                compatibility: 92,
                tags: ["#ã‚¢ãƒ‹ãƒ¡", "#æ—…è¡Œ", "#èªå­¦äº¤æ›", "#æ–‡åŒ–äº¤æµ"],
                intro: "æ—¥æœ¬ã®æ–‡åŒ–ãŒå¤§å¥½ãã§ã™ï¼ä¸€ç·’ã«è©±ã—ãªãŒã‚‰æ—¥æœ¬èªã‚’æ•™ãˆã¦ãã‚Œã‚‹å‹é”ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚Let's be friends!",
                hobbies: ["ã‚¢ãƒ‹ãƒ¡", "æ—…è¡Œ"],
                image: "ğŸŒ"
            },
            {
                name: "ç”°ä¸­ æ˜ç¾",
                age: 38,
                avatar: "æ˜",
                compatibility: 83,
                tags: ["#ã‚«ãƒ•ã‚§å·¡ã‚Š", "#èª­æ›¸", "#éŸ³æ¥½", "#ã‚¢ãƒ¼ãƒˆ"],
                intro: "æ–°ã—ã„è¡—ã«å¼•ã£è¶Šã—ã¦ããŸã°ã‹ã‚Šã§ã™ã€‚ä¸€ç·’ã«ã‚«ãƒ•ã‚§å·¡ã‚Šã‚’æ¥½ã—ã‚“ã§ãã‚Œã‚‹å‹é”ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚",
                hobbies: ["ã‚«ãƒ•ã‚§å·¡ã‚Š", "èª­æ›¸"],
                image: "â˜•"
            },
            {
                name: "ä½è—¤ é›„å¤ª",
                age: 29,
                avatar: "é›„",
                compatibility: 76,
                tags: ["#ã‚¹ãƒãƒ¼ãƒ„", "#ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢", "#å†™çœŸ", "#ãƒã‚¤ã‚¯"],
                intro: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«éã”ã™ã®ãŒå¥½ãã§ã™ã€‚ä¸€ç·’ã«ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ã‚’æ¥½ã—ã‚ã‚‹ä»²é–“ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚",
                hobbies: ["ã‚¹ãƒãƒ¼ãƒ„", "ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢"],
                image: "ğŸƒâ€â™‚ï¸"
            }
        ];

// ç”»é¢é·ç§»
function goToScreen(screenId) {
    const currentScreenEl = document.getElementById(currentScreen);
    const nextScreenEl = document.getElementById(screenId);
    
    // ç¾åœ¨ã®ç”»é¢ã®è¦ç´ ãŒå­˜åœ¨ã—ãªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ 
    if (!currentScreenEl) {
        console.error('Current screen element not found:', currentScreen);
        return;
    }
    
    if (!nextScreenEl) {
        console.error('Next screen element not found:', screenId);
        return;
    }
    
    currentScreenEl.classList.remove('active');
    currentScreenEl.classList.add('prev');
    
    setTimeout(() => {
        nextScreenEl.classList.add('active');
        currentScreen = screenId;
        
        // ç”»é¢å›ºæœ‰ã®åˆæœŸåŒ–å‡¦ç†
        if (screenId === 'main-screen') {
            initializeMainScreen();
        } else if (screenId === 'analysis-screen') {
            setTimeout(() => {
                startAnalysisAnimation();
            }, 500);
        }
    }, 250);
}

        // ç›®çš„é¸æŠ
        function selectPurpose(element, purpose) {
            document.querySelectorAll('.purpose-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedPurpose = purpose;
            
            setTimeout(() => {
                goToScreen('profile-screen');
            }, 800);
        }

        // ã‚¿ã‚°é¸æŠ
        function toggleTag(element) {
            element.classList.toggle('selected');
            validateForm();
        }

        // ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼
        function validateForm() {
            const nickname = document.getElementById('nickname').value.trim();
            const age = document.getElementById('age').value;
            const selectedTags = document.querySelectorAll('.tag.selected');
            const analyzeBtn = document.getElementById('analyze-btn');
            
            if (nickname && age && selectedTags.length > 0) {
                analyzeBtn.classList.add('active');
            } else {
                analyzeBtn.classList.remove('active');
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('nickname').addEventListener('input', validateForm);
            document.getElementById('age').addEventListener('change', validateForm);
        });

        // AIåˆ†æé–‹å§‹
        function startAnalysis() {
            const nickname = document.getElementById('nickname').value.trim();
            const age = document.getElementById('age').value;
            const selectedTags = Array.from(document.querySelectorAll('.tag.selected')).map(tag => tag.textContent);
            
            userProfile = {
                nickname: nickname,
                age: age,
                tags: selectedTags,
                avatar: nickname.charAt(0).toUpperCase()
            };
            
            goToScreen('analysis-screen');
        }

        // åˆ†æã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function startAnalysisAnimation() {
            const animationContainer = document.getElementById('analysis-animation');
            const analysisText = document.getElementById('analysis-text');
            const radarChart = document.getElementById('radar-chart');
            
            // ç²’å­ç”Ÿæˆ
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createParticle(animationContainer);
                }, i * 100);
            }
            
            // ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›´
            const texts = [
                "ã‚ãªãŸã«åˆã„ãã†ãªäººã‚’æ¢ã—ã¦ã„ã¾ã™...",
                "ç›¸æ€§ãŒè‰¯ã•ãã†ãªäººã‚’æº–å‚™ã—ã¦ã„ã¾ã™...",
                "AIã«ã‚ˆã‚‹è©³ç´°åˆ†æã‚’å®Ÿè¡Œä¸­...",
                "æœ€é©ãªãƒãƒƒãƒãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™..."
            ];
            
            let textIndex = 0;
            const textInterval = setInterval(() => {
                if (textIndex < texts.length) {
                    analysisText.textContent = texts[textIndex];
                    textIndex++;
                } else {
                    clearInterval(textInterval);
                }
            }, 1000);
            
            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
            setTimeout(() => {
                radarChart.classList.add('show');
                analysisText.textContent = "åˆ†æãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã‚ãªãŸã«ã´ã£ãŸã‚Šã®æ–¹ã‚’æ¢ã—ã«è¡Œãã¾ã—ã‚‡ã†ï¼";
                
                setTimeout(() => {
                    goToScreen('main-screen');
                }, 2000);
            }, 4000);
        }

        // ç²’å­ç”Ÿæˆ
        function createParticle(container) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 180 + 'px';
            particle.style.top = Math.random() * 180 + 'px';
            particle.style.animationDelay = Math.random() * 2 + 's';
            container.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 3000);
        }

        // ãƒ¡ã‚¤ãƒ³ç”»é¢åˆæœŸåŒ–
        function initializeMainScreen() {
            document.getElementById('user-avatar').textContent = userProfile.avatar;
            document.getElementById('user-name').textContent = userProfile.nickname;
            
            renderCards();
        }

        // ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
        function renderCards() {
            const cardStack = document.getElementById('card-stack');
            cardStack.innerHTML = '';
            
            for (let i = 0; i < Math.min(3, profiles.length - currentCardIndex); i++) {
                const profile = profiles[currentCardIndex + i];
                const card = createProfileCard(profile, i);
                cardStack.appendChild(card);
            }
        }

        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ä½œæˆ
        function createProfileCard(profile, index) {
            const card = document.createElement('div');
            card.className = 'profile-card';
            card.style.zIndex = 3 - index;
            card.style.transform = `scale(${1 - index * 0.05}) translateY(${index * 10}px)`;
            
            card.innerHTML = `
                <div class="card-image">${profile.image}</div>
                <div class="card-content">
                    <div class="card-name">${profile.name}</div>
                    <div class="card-age">${profile.age}æ­³</div>
                    <div class="card-compatibility">AIç›¸æ€§ ${profile.compatibility}%</div>
                    <div class="card-tags">
                        ${profile.tags.map(tag => `<span class="card-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `;
            
            return card;
        }

        // ã‚«ãƒ¼ãƒ‰æ‹’å¦
        function rejectCard() {
            animateCard('left');
            nextCard();
        }

    

// ã‚«ãƒ¼ãƒ‰ã„ã„ã­
function likeCard() {
    const topCard = document.querySelector('.profile-card');
    if (!topCard) return; // ã‚«ãƒ¼ãƒ‰ãŒãªã‘ã‚Œã°å‡¦ç†ã‚’ä¸­æ–­

    // ä»–ã®å‡¦ç†ã‚’ã™ã‚‹å‰ã«ã€ã„ã„ã­ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
    const likedProfile = profiles[currentCardIndex];

    animateCard('right');
    createHeartAnimation();
    likeCount++;

    // çŠ¶æ…‹ã‚’å¸¸ã«æ­£ã—ãä¿ã¤ãŸã‚ã€å¸¸ã«nextCard()ã‚’å‘¼ã³å‡ºã™
    nextCard(); 

    // ã„ã„ã­ã®çµæœã€ãƒãƒƒãƒãƒ³ã‚°ãŒæˆç«‹ã—ãŸã‹ã‚’ç¢ºèªã™ã‚‹
    if (likeCount === 3) {
        matchedPartner = likedProfile; // å…ˆã»ã©ä¿å­˜ã—ãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’ä½¿ã†
        
        // ã‚«ãƒ¼ãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒçµ‚ã‚ã£ãŸç›´å¾Œã«ãƒãƒƒãƒç”»é¢ã¸é·ç§»ã•ã›ã‚‹
        // çŸ­ã„æ™‚é–“ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™
        setTimeout(() => {
            goToMatch();
        }, 350); 
    }
}

        // ã‚«ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateCard(direction) {
            const topCard = document.querySelector('.profile-card');
            if (topCard) {
                const translateX = direction === 'left' ? '-100%' : '100%';
                topCard.style.transform = `translateX(${translateX}) rotate(${direction === 'left' ? '-' : ''}30deg)`;
                topCard.style.opacity = '0';
                
                setTimeout(() => {
                    topCard.remove();
                }, 300);
            }
        }

        // æ¬¡ã®ã‚«ãƒ¼ãƒ‰
        function nextCard() {
            currentCardIndex++;
            setTimeout(() => {
                renderCards();
            }, 300);
        }

        // ãƒãƒ¼ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function createHeartAnimation() {
            const heart = document.createElement('div');
            heart.className = 'heart-animation';
            heart.innerHTML = 'â™¥';
            heart.style.left = '50%';
            heart.style.top = '50%';
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 2000);
        }

        // ãƒãƒƒãƒãƒ³ã‚°ç”»é¢ã¸
        function goToMatch() {
            document.getElementById('match-text').textContent = `${matchedPartner.name}ã¨ãƒãƒƒãƒã—ã¾ã—ãŸï¼`;
            document.getElementById('partner-match-avatar').textContent = matchedPartner.avatar;
            
            // ç´™å¹é›ªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            createConfetti();
            
            goToScreen('match-screen');
        }

        // ç´™å¹é›ªç”Ÿæˆ
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = ['#ff6b6b', '#4a90e2', '#ff8e53', '#7b68ee'][Math.floor(Math.random() * 4)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        // ãƒãƒ£ãƒƒãƒˆç”»é¢ã¸
        function goToChat(useAI) {
            document.getElementById('chat-header').textContent = `${matchedPartner.name}ã¨ã®ãƒãƒ£ãƒƒãƒˆ`;
            
            if (useAI) {
                // AIææ¡ˆã®å†…å®¹ã‚’å‹•çš„ã«æ›´æ–°
                const userHobby = userProfile.tags[0] || '#æ•£æ­©';
                const partnerHobby = matchedPartner.hobbies[0] || 'ä¿³å¥';
                
                document.getElementById('suggestion-hobby').textContent = partnerHobby;
                document.getElementById('suggestion-user-hobby').textContent = userHobby.replace('#', '');
                document.getElementById('suggestion-user-name').textContent = userProfile.nickname;
            }
            
            goToScreen('chat-screen');
        }

        // AIææ¡ˆè¡¨ç¤º
        function showAISuggestions() {
            const suggestions = document.getElementById('ai-suggestions');
            suggestions.classList.toggle('hide');
            suggestions.classList.toggle('show');
        }

        // AIææ¡ˆé¸æŠ
        function selectSuggestion(element, index) {
            const messageInput = document.getElementById('message-input');
            const suggestionText = element.textContent;
            
            // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            messageInput.value = '';
            messageInput.classList.add('typing-animation');
            
            let charIndex = 0;
            const typingInterval = setInterval(() => {
                if (charIndex < suggestionText.length) {
                    messageInput.value += suggestionText[charIndex];
                    charIndex++;
                } else {
                    clearInterval(typingInterval);
                    messageInput.classList.remove('typing-animation');
                }
            }, 50);
            
            // ææ¡ˆã‚’éè¡¨ç¤º
            document.getElementById('ai-suggestions').classList.add('hide');
            document.getElementById('ai-suggestions').classList.remove('show');
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
        function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const message = messageInput.value.trim();
            
            if (message) {
                const chatMessages = document.getElementById('chat-messages');
                
                // è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
                const messageElement = document.createElement('div');
                messageElement.className = 'message sent';
                messageElement.innerHTML = `<div class="message-bubble">${message}</div>`;
                chatMessages.appendChild(messageElement);
                
                // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢
                messageInput.value = '';
                
                // ç›¸æ‰‹ã‹ã‚‰ã®è¿”ä¿¡ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                setTimeout(() => {
                    const responses = [
                        "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã¨ã¦ã‚‚å¬‰ã—ã„ã§ã™ã€‚",
                        "ã“ã¡ã‚‰ã“ãã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚",
                        "ãŠè©±ã—ã§ãã¦æ¥½ã—ã„ã§ã™ã€‚ã¾ãŸæ˜æ—¥ã‚‚ãƒãƒ£ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ï¼",
                        "ç´ æ•µãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚"
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    const responseElement = document.createElement('div');
                    responseElement.className = 'message received';
                    responseElement.innerHTML = `<div class="message-bubble">${randomResponse}</div>`;
                    chatMessages.appendChild(responseElement);
                    
                    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ€ä¸‹éƒ¨ã«
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                
                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ€ä¸‹éƒ¨ã«
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Enterã‚­ãƒ¼ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('message-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });

        // ã‚¹ãƒ¯ã‚¤ãƒ—æ©Ÿèƒ½ï¼ˆã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ç”¨ï¼‰
        let startX = 0;
        let startY = 0;
        let currentX = 0;
        let currentY = 0;
        let isSwipe = false;

        document.addEventListener('touchstart', function(e) {
            if (currentScreen === 'main-screen') {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                isSwipe = true;
            }
        });

        document.addEventListener('touchmove', function(e) {
            if (isSwipe && currentScreen === 'main-screen') {
                currentX = e.touches[0].clientX;
                currentY = e.touches[0].clientY;
                
                const diffX = currentX - startX;
                const diffY = currentY - startY;
                
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    const topCard = document.querySelector('.profile-card');
                    if (topCard) {
                        const rotation = diffX * 0.1;
                        topCard.style.transform = `translateX(${diffX}px) rotate(${rotation}deg)`;
                        topCard.style.opacity = 1 - Math.abs(diffX) / 200;
                    }
                }
            }
        });

        document.addEventListener('touchend', function(e) {
            if (isSwipe && currentScreen === 'main-screen') {
                const diffX = currentX - startX;
                
                if (Math.abs(diffX) > 100) {
                    if (diffX > 0) {
                        likeCard();
                    } else {
                        rejectCard();
                    }
                } else {
                    const topCard = document.querySelector('.profile-card');
                    if (topCard) {
                        topCard.style.transform = '';
                        topCard.style.opacity = '1';
                    }
                }
                
                isSwipe = false;
            }
        });

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Tsunagaru AI ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ');
        });
    </script>
</body>
</html>